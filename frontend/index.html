<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sal√£o IA - Agendamento Inteligente</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="container">
            <!-- NOVO: Elemento para o Logo Din√¢mico -->
            <img id="systemLogo" class="logo-image" src="https://placehold.co/120x30/667eea/ffffff?text=Sal√£o+IA" alt="Logo do Sal√£o">
            <div id="userMenu" class="user-menu" style="display: none;">
                <!-- NOVO: Link/Bot√£o de Admin (vis√≠vel apenas para admins) -->
                <button id="adminLink" onclick="showScreen('adminConfigScreen')" class="btn-admin" style="display: none;">‚öôÔ∏è Configura√ß√£o</button>
                <span id="userName"></span>
                <button onclick="logout()" class="btn-secondary">Sair</button>
            </div>
        </div>
    </nav>

    <!-- Container Principal -->
    <div class="container main-container">
        
        <!-- ==================== TELA DE LOGIN/REGISTRO ==================== -->
        <div id="authScreen" class="screen active">
            <div class="auth-box">
                <h2 id="authTitle">Entrar</h2>
                
                <form id="authForm">
                    <!-- Campos de Registro (ocultos inicialmente) -->
                    <div id="registerFields" style="display: none;">
                        <input type="text" id="nome" placeholder="Nome Completo" minlength="3">
                        <input type="tel" id="telefone" placeholder="Telefone (ex: 912984384)" pattern="[0-9]{9,15}">
                        <input type="text" id="morada" placeholder="Morada (ex: Rua principal, 10)">
                    </div>

                    <!-- Campos Comuns -->
                    <input type="email" id="email" placeholder="Email" required>
                    <input type="password" id="senha" placeholder="Senha" required minlength="6">
                    
                    <button type="submit" class="btn-primary">Entrar</button>
                </form>

                <p class="auth-toggle">
                    <span id="authToggleText">N√£o tem conta?</span> 
                    <a href="#" onclick="toggleAuthMode(event)">Criar conta</a>
                </p>
            </div>
        </div>

        <!-- ==================== TELA DE UPLOAD/AGENDAMENTO (Usu√°rio Padr√£o) ==================== -->
        <div id="uploadScreen" class="screen">
            <div class="upload-box">
                <h2>Corte & Beleza com IA</h2>
                <p class="info-text">Tire uma foto para receber sugest√µes de cortes e agendar!</p>

                <!-- √Årea da C√¢mera (Conte√∫do de camera.js) -->
                <video id="videoElement" autoplay></video>
                <canvas id="canvasElement" style="display:none;"></canvas>
                <img id="photoPreview" style="display:none;">
                
                <div class="button-group">
                    <button id="startCameraButton" onclick="startCamera()" class="btn-secondary">üì∏ Ligar C√¢mera</button>
                    <button id="takePictureButton" onclick="takePicture()" class="btn-primary" style="display:none;">‚úÖ Tirar Foto</button>
                    <button id="processImageButton" onclick="processImage()" class="btn-primary" style="display:none;">‚ú® Processar Imagem</button>
                    <button id="retakePictureButton" onclick="retakePicture()" class="btn-secondary" style="display:none;">üîÑ Retirar</button>
                </div>
            </div>
        </div>

        <!-- ==================== TELA DE SUGEST√ïES (Agendamento) ==================== -->
        <div id="suggestionsScreen" class="screen">
            <div class="suggestions-box">
                <h2>üíá‚Äç‚ôÄÔ∏è Sugest√µes Personalizadas</h2>
                <div id="aiSuggestions">
                    <!-- Sugest√µes da IA ser√£o inseridas aqui -->
                </div>
                
                <h3>Agendar Servi√ßo</h3>
                <form id="appointmentForm">
                    <select id="tipoServico" onchange="loadProfessionals()">
                        <option value="">Selecione o Tipo de Servi√ßo</option>
                        <option value="cabelo">Cabelo</option>
                        <option value="unha">Unha</option>
                    </select>
                    
                    <select id="profissional" required>
                        <option value="">Selecione um profissional</option>
                    </select>

                    <input type="date" id="data" required>
                    <select id="horario" required>
                        <option value="">Selecione um hor√°rio</option>
                    </select>

                    <input type="text" id="servico" placeholder="Servi√ßo Espec√≠fico (ex: Corte Long Bob)" required>
                    
                    <button type="submit" class="btn-primary">‚úÖ Confirmar Agendamento</button>
                    <button type="button" onclick="showScreen('uploadScreen')" class="btn-secondary">üîô Voltar</button>
                </form>
            </div>
        </div>

        <!-- ==================== TELA DE MEUS AGENDAMENTOS ==================== -->
        <div id="myAppointmentsScreen" class="screen">
            <div class="appointments-list-box">
                <h2>üìã Meus Agendamentos</h2>
                <button onclick="showScreen('uploadScreen')" class="btn-secondary mb-20">üîô Voltar</button>
                <div id="appointmentsList"></div>
            </div>
        </div>
        
        <!-- ==================== NOVO: TELA DE ADMIN CONFIGURA√á√ÉO ==================== -->
        <div id="adminConfigScreen" class="screen">
            <div class="auth-box">
                <h2>‚öôÔ∏è Configura√ß√£o do Sal√£o</h2>
                <p class="info-text">Altere o tema visual e a logo do sal√£o.</p>
                
                <form id="configForm">
                    <!-- Cores -->
                    <label for="primaryColor">Cor Prim√°ria (Tema):</label>
                    <input type="color" id="primaryColor" name="primary_color" required>
                    
                    <label for="secondaryColor">Cor Secund√°ria:</label>
                    <input type="color" id="secondaryColor" name="secondary_color" required>

                    <!-- Logo Atual -->
                    <h4>Logo Atual:</h4>
                    <img id="currentLogoPreview" src="https://placehold.co/120x30/cccccc/000000?text=Logo" alt="Logo Atual" class="logo-preview-small">

                    <!-- Upload da Nova Logo -->
                    <label for="newLogo">Fazer Upload de Nova Logo (.png, .jpg):</label>
                    <input type="file" id="newLogo" name="logo_file" accept="image/*">
                    
                    <!-- Preview da Nova Logo (enquanto selecionada) -->
                    <img id="newLogoPreview" src="" alt="Nova Logo Preview" class="logo-preview-small" style="display: none; margin-top: 10px;">

                    <button type="submit" class="btn-primary">üíæ Salvar Configura√ß√£o e Aplicar</button>
                    <button type="button" onclick="showScreen('uploadScreen')" class="btn-secondary">üè† Voltar</button>
                </form>
            </div>
        </div>
        <!-- ==================== FIM TELA ADMIN ==================== -->

    </div>

    <!-- Menu R√°pido -->
    <div class="quick-menu" id="quickMenu" style="display: none;">
        <button onclick="showScreen('uploadScreen')" class="quick-btn">üè† In√≠cio</button>
        <button onclick="loadMyAppointments()" class="quick-btn">üìã Agendamentos</button>
    </div>

    <!-- ==================== SCRIPTS (ORDEM CORRETA) ==================== -->
    <!-- 1¬∫: Configura√ß√£o global, autentica√ß√£o, navega√ß√£o -->
    <script src="js/app.js"></script>
    
    <!-- NOVO: 2¬∫: L√≥gica do Formul√°rio de Configura√ß√£o do Administrador -->
    <script src="js/adminConfig.js"></script> 

    <!-- 3¬∫: Funcionalidades de c√¢mera e upload -->
    <script src="js/camera.js"></script>
    
    <!-- 4¬∫: Sistema de agendamentos -->
    <script src="js/appointments.js"></script>
    
    <!-- REMOVA ou deixe comentado o auth.js se as fun√ß√µes j√° est√£o no app.js -->
    <!-- <script src="js/auth.js"></script> -->
</body>
</html>